"use strict";(self.webpackChunkonekey_document=self.webpackChunkonekey_document||[]).push([[5888],{2900:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return l},default:function(){return u}});var i=n(7462),r=n(3366),a=(n(7294),n(3905)),o={sidebar_position:1},s="Registering Your Contract's Method Names",c={unversionedId:"Extension/Best Practices/registering-function-names",id:"Extension/Best Practices/registering-function-names",isDocsHomePage:!1,title:"Registering Your Contract's Method Names",description:"OneKey uses the Parity on-chain registry of function signatures to display method names on the confirm screen.",source:"@site/docs/Extension/03-Best Practices/registering-function-names.md",sourceDirName:"Extension/03-Best Practices",slug:"/Extension/Best Practices/registering-function-names",permalink:"/en/Extension/Best Practices/registering-function-names",editUrl:"https://github.com/onekeyhq/documents/edit/main/docs/Extension/03-Best Practices/registering-function-names.md",version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"ExtensionSidebar",previous:{title:"Signing Data",permalink:"/en/Extension/API Reference/signing-data"},next:{title:"Registering Tokens with Users",permalink:"/en/Extension/Best Practices/registering-your-token"}},l=[{value:"Verify",id:"verify",children:[{value:"Using remix.ethereum.org",id:"using-remixethereumorg",children:[]},{value:"Using <code>eth-method-registry</code>",id:"using-eth-method-registry",children:[]}]}],m={toc:l};function u(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"registering-your-contracts-method-names"},"Registering Your Contract's Method Names"),(0,a.kt)("p",null,"OneKey uses the Parity on-chain registry of function signatures to display method names on the confirm screen.\nFor many common method names, like token methods, this allows OneKey to successfully look up the method names by their ",(0,a.kt)("a",{parentName:"p",href:"https://solidity.readthedocs.io/en/v0.4.21/abi-spec.html"},"method signature"),".\nHowever, sometimes you're using a method that is not in that on-chain registry, and OneKey will simply display ",(0,a.kt)("inlineCode",{parentName:"p"},"Contract Interaction")," to the user."),(0,a.kt)("p",null,"To add your contract's function names to this registry so it shows in the OneKey interface, follow the below steps."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Go to the ",(0,a.kt)("a",{parentName:"p",href:"https://etherscan.io/address/0x44691b39d1a75dc4e0a0346cbb15e310e6ed1e86#writeContract"},"Mainnet Parity signature registration contract on etherscan"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Connect OneKey")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Use etherscan's write contract feature to input the string value (without quotes or spaces) to the register function"),(0,a.kt)("p",{parentName:"li"},"For example:"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"getOwners()")),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"execTransaction(address,uint256,bytes,uint8,uint256,uint256,uint256,address,address,bytes)"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},'Click "write"')),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Approve the transaction in OneKey (you only pay gas)"))),(0,a.kt)("h2",{id:"verify"},"Verify"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ethers.utils.keccak256('getOwners()') => 0xa0e67e2bdc0a6d8a09ccd6c353c9df590807ad66ff5e6630c4f31a86dfa84821")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Take the first 10 characters: ",(0,a.kt)("inlineCode",{parentName:"li"},"0xa0e67e2b")),(0,a.kt)("li",{parentName:"ul"},"Input them into ",(0,a.kt)("a",{parentName:"li",href:"https://jennypollack.github.io/function_signature_registry/"},"this demo app")," that checks the on-chain registry",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Mainnet or Rinkeby only")))),(0,a.kt)("h3",{id:"using-remixethereumorg"},"Using remix.ethereum.org"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Paste the contract code from ",(0,a.kt)("a",{parentName:"li",href:"https://www.bokconsulting.com.au/blog/a-quick-look-at-paritys-signature-registry-contract/"},"bokky's blog post")," into ",(0,a.kt)("a",{parentName:"li",href:"https://remix.ethereum.org"},"remix"),"."),(0,a.kt)("li",{parentName:"ul"},"Set the correct compiler version based on the contract."),(0,a.kt)("li",{parentName:"ul"},"Use remix's write functionality to add to the registry."),(0,a.kt)("li",{parentName:"ul"},"You can look at the FUNCTIONHASHES section on ",(0,a.kt)("a",{parentName:"li",href:"https://remix.ethereum.org"},"remix"),' by loading the signature registry contract, press the "details" button on the compile tab.')),(0,a.kt)("h3",{id:"using-eth-method-registry"},"Using ",(0,a.kt)("inlineCode",{parentName:"h3"},"eth-method-registry")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You can also use the ",(0,a.kt)("a",{parentName:"li",href:"https://rinkeby.etherscan.io/address/0x0c0831fb1ec7442485fb41a033ba188389a990b4"},"signature registry")," deployed on Rinkeby",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/OneKey/eth-method-registry"},(0,a.kt)("inlineCode",{parentName:"a"},"eth-method-registry"))," is used to lookup methods in OneKey."),(0,a.kt)("li",{parentName:"ul"},"Note that OneKey reads from the Mainnet ",(0,a.kt)("inlineCode",{parentName:"li"},"eth-method-registry")," endpoint, regardless of user's network."),(0,a.kt)("li",{parentName:"ul"},"For more details, see ",(0,a.kt)("a",{parentName:"li",href:"https://ethereum.stackexchange.com/questions/59678/metamask-shows-unknown-function-when-calling-method-send-function"},"this StackExchange answer"),".")))))}u.isMDXComponent=!0}}]);